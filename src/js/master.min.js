/*

 @copyright
 Copyright 2015 Eric Lagergren

 This software is licensed under
 Attribution-ShareAlike 4.0 International (CC BY-SA 4.0)
 A copy of said license should be found with the software;
 if not, a copy can be found here:
 https://creativecommons.org/licenses/by-sa/4.0/legalcode
*/
var e=document;if(window.navigator.standalone){var h;e.addEventListener("click",function(f){for(h=f.target;"A"!==h.nodeName&&"HTML"!==h.nodeName;)h=h.parentNode;-1!==h.href.indexOf("http")&&-1!==h.href.indexOf(e.location.host)&&(f.preventDefault(),e.location.href=h.href)},!1)}if(!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||window.navigator.standalone)e.getElementById("iphoneinstall").classList.toggle("hidden");else{var v=e.getElementsByTagName("body")[0];v.setAttribute("style","margin-top:40px;");v.classList.toggle("no-touch")}window.applicationCache.addEventListener("updateready",function(){window.applicationCache.swapCache()},!1);function w(){function f(a){var c=document;c.getElementById("tablecidr").innerHTML=a;c.getElementById("tablesubmask").innerHTML=a;c.getElementById("tablebinarysub").innerHTML=a;c.getElementById("tablenumhosts").innerHTML=a;c.getElementById("tablewildcardmask").innerHTML=a;c.getElementById("tableipclass").innerHTML=a;c.getElementById("tableiptohex").innerHTML=a;c.getElementById("tablebinaryip").innerHTML=a;c.getElementById("tablenetworkid").innerHTML=a;c.getElementById("tablebroadcastaddress").innerHTML=a;c.getElementById("tablenetworkrange").innerHTML=a;throw Error(a);}function u(a){return"undefined"===typeof a||isNaN(a)||null===a}function x(a,c){var b=a.split(".");if(4!==b.length||""===a)c?f("Invalid IP entered"):f("Invalid Submask entered");for(var d=0;4>d;d++){var g=+b[d];if(g!=b[d]||0>g||255<g)c?f("Invalid IP entered"):f("Invalid Submask entered")}}function y(a){for(var c=0,b=0;4>c;)b<<=8,b+=+a[c++];return b>>>0}function n(a){return[a>>>24,a>>16&255,a>>8&255,a&255].join(".")}function z(a){a=a.split(".");for(var c=0,b=0;4>c;)b=(b<<8|+a[c++])>>0;b-=b>>>1&1431655765;b=(b&858993459)+(b>>>2&858993459);return 16843009*(b+(b>>>4)&252645135)>>>24}function B(a){u(a)&&f("Invalid IP entered");if(128>a)return"255.0.0.0";if(192>a)return"255.255.0.0";if(224>a)return"255.255.255.0";if(256>a)return"255.255.255.255";f("Invalid IP entered");return""}var m=e.forms.valuebox,d=m.submask.value,k,l=m.ip.value,g;32>=d&&(g=+d,k=n(-1<<32-g));4===d.split(".").length&&(g=z(d),k=d);if(m.cb.checked||32<d)g=0!==d?32-Math.ceil(Math.log(d)/Math.log(2)):0,k=n(-1<<32-g);u(g)&&f("Mask/CIDR/Hosts isn't a number or quad-dotted string");g||(k=B(+l.split(".")[0]),g=z(k));m=l.split(".");d=k.split(".");x(l,!0);x(k,!1);var l=function(a){a=a||0;return 2<=a?Math.pow(2,32-a)-2:a}(g),l=2<=l?l.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):0,p=y(m),q=y(d),d=n(p&q),A=n(p|~q),C=function(a){u(a)&&f("Invalid IP entered");if(224>a)return 192>a?128>a?"Class A":"Class B":"Class C";if(256>a)return 240>a?"Class D":"Class E";f("Invalid IP entered");return""}(+m[0]),q=n(~q),p="0x"+p.toString(16).toUpperCase(),r=d.split("."),t=A.split(".");r[3]=(+r[3]+1).toString();t[3]=(+t[3]-1).toString();r=r.join(".");t=t.join(".");e.getElementById("tablecidr").innerHTML=g;e.getElementById("tablesubmask").innerHTML=k;e.getElementById("tablebinarysub").innerHTML=function(a){for(var c="",b="";c.length<a;)c+="1";for(;b.length<32-a;)b+="0";return(c+b).replace(/(.{8})(.{8})(.{8})/g,"$1.$2.$3.")}(g);e.getElementById("tablenumhosts").innerHTML=l;e.getElementById("tablewildcardmask").innerHTML=q;e.getElementById("tableipclass").innerHTML=C;e.getElementById("tableiptohex").innerHTML=p;e.getElementById("tablebinaryip").innerHTML=function(a){for(var c="",b="",d=0;4>d;d++){for(b=(+a[d]).toString(2);8>b.length;)b="0"+b;c+=b}return c.replace(/(.{8})(.{8})(.{8})/g,"$1.$2.$3.")}(m);e.getElementById("tablenetworkid").innerHTML=d;e.getElementById("tablebroadcastaddress").innerHTML=A;e.getElementById("tablenetworkrange").innerHTML=r+" - "+t}window.onload=function(){document.getElementsByTagName("form")[0].onsubmit=function(f){f.preventDefault();w();window.scrollTo(0,document.body.scrollHeight)};document.onkeypress=function(f){13==(window.event?f.which:f.keyCode)&&w()&&document.forms.valuebox.submit()}};